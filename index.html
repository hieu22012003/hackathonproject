<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAE Interface</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style_index.css">
</head>

<body>
    <!-- NAV -->
    <div class="navbar">
        <div class="logo">
            <img src="images/logo.png" alt="GAE Logo">
        </div>
        <ul>
            <li><a href="index.html"><i class="material-icons">home</i> Home</a></li>
            <li><a href="#"><i class="material-icons">info</i> About</a></li>
            <li><a href="#"><i class="material-icons">book</i> Courses</a></li>
            <li><a href="#"><i class="material-icons">group</i> Community</a></li>
            <li><a href="#"><i class="material-icons">email</i> Contact</a></li>
        </ul>
        <div class="search-bar">
            <input type="text" placeholder="Search...">
        </div>
        <div class="login-buttons">
            <a href="quiz.html" class="generate-button"><i class="material-icons">sparkles</i> Generate</a>
        </div>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <ul>
            <li><i class="material-icons">person</i><a href="#">My account</a></li>
            <li><i class="material-icons">menu_book</i><a href="#">My learning</a></li>
            <li><i class="material-icons">work</i><a href="#">Project</a></li>
            <li><i class="material-icons">workspace_premium</i><a href="#">Work space</a></li>
        </ul>
    </div>

    <!-- MAIN -->
    <div class="main-content">
        <div class="hero">
            <img src="images/elements.png" alt="Robot">
            <h1>Học ngay cùng GAE!</h1>
            <div class="search-container">
                <div class="search-box">
                    <i class="material-icons search-icon">search</i>
                    <input type="text" placeholder="Tìm kiếm...">
                    <i class="material-icons voice-icon">mic</i>
                </div>
            </div>
            <button>Bắt đầu</button>
        </div>
        <div class="cards">
            <div class="card">
                <img src="images/ảnh 1.png" alt="">
                <div class="button-link">Lên lịch trình học</div>
                <p>(Coming Soon...)</p>
            </div>
            <div class="card">
                <img src="images/ảnh 2.png" alt="">
                <p><a href="quiz.html" class="button-link">Làm Quiz test</a></p>
            </div>
            <div class="card">
                <img src="images/ảnh 3.jpg" alt="">
                <div class="button-link">Cá nhân hóa</div>
                <p>(Coming Soon...)</p>
            </div>
            <div class="card">
                <img src="images/ảnh 4.jpg" alt="">
                <div class="button-link">Thông báo nhắc nhở</div>
                <p>(Coming Soon...)</p>
            </div>
        </div>
    </div>

    <!-- TIMER -->
    <div class="timer-container pomodoro-bg" id="timer-container">
        <div class="timer" id="timer">25:00</div>
        <button class="timer-button" id="start-button" onclick="startTimer()">BẮT ĐẦU</button>
        <div class="resizer" id="resizer"></div>
    </div>

    <script>
        let timer;
        let timeLeft = 25 * 60;
        let sessionCount = 0;
        let isBreak = false;

        function setPomodoro() {
            clearInterval(timer);
            timeLeft = 25 * 60;
            document.getElementById('timer').innerText = '25:00';
            document.getElementById('timer-container').classList.add('pomodoro-bg');
            document.getElementById('timer-container').classList.remove('short-break-bg');
            isBreak = false;
        }

        function setShortBreak() {
            clearInterval(timer);
            timeLeft = 5 * 60;
            document.getElementById('timer').innerText = '05:00';
            document.getElementById('timer-container').classList.add('short-break-bg');
            document.getElementById('timer-container').classList.remove('pomodoro-bg');
            isBreak = true;
        }

        function startTimer() {
            document.getElementById('start-button').style.display = 'none'; // Hide the start button
            if (timer) clearInterval(timer);
            timer = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (timeLeft <= 0) {
                clearInterval(timer);
                if (isBreak) {
                    setPomodoro();
                } else {
                    sessionCount++;
                    setShortBreak();
                }
                startTimer();
            }

            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            document.getElementById('timer').innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            timeLeft--;
        }

        const timerContainer = document.getElementById("timer-container");
        const resizer = document.getElementById("resizer");
        let isResizing = false;
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

        timerContainer.addEventListener('mousedown', dragMouseDown);
        resizer.addEventListener('mousedown', resizeMouseDown);

        function dragMouseDown(e) {
            if (isResizing) return;
            e = e || window.event;
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            timerContainer.style.top = (timerContainer.offsetTop - pos2) + "px";
            timerContainer.style.left = (timerContainer.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
        }

        function resizeMouseDown(e) {
            isResizing = true;
            e = e || window.event;
            e.preventDefault();
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeResizeElement;
            document.onmousemove = elementResize;
        }

        function elementResize(e) {
            e = e || window.event;
            e.preventDefault();
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            timerContainer.style.width = (timerContainer.offsetWidth - pos1) + "px";
            timerContainer.style.height = (timerContainer.offsetHeight - pos2) + "px";
        }

        function closeResizeElement() {
            isResizing = false;
            document.onmouseup = null;
            document.onmousemove = null;
        }
    </script>
</body>

</html>
